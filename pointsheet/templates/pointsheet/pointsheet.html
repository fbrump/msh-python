{% load static from staticfiles %}

<!doctype html>
<html data-ng-app="pointsheetApp">
    <head>
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.4.2/pure-min.css">
        <!-- BOOTSTRAP -->
        <link rel="stylesheet" href="{% static 'css/bootstrap/css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/common.css' %}">
        <script>
            globals = {
                pointsheetsUrl: '{% url "pointsheets" %}'
            }
        </script>
    </head>
    <body>
        <main data-ng-controller="pointsheetsCtrl">
            <header>
                <h2>Pointsheet</h2>
            </header>
            <section class="row">
                <button class="btn btn-primary" data-ng-click="showForm()">
                    Insert
                </button>
                <button class="btn btn-default" title="Came back for last page.. defained so long">
                    Came back
                </button>
            </section>
            <section class="row">
                <header class="alert alert-success" data-ng-show="data.success">
                    <b>Success!</b>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </header>
                <article class="table-responsive">
                    <table class="table table-striped table-bordered table-hover table-condensed" data-ng-if="data.pointsheets.length > 0">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Month</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <td colspan="3">
                                    <em>Rown <strong ng-bind="data.pointsheets.length"></strong></em>
                                </td>
                            </tr>
                        </tfoot>
                        <tbody data-ng-repeat="item in data.pointsheets">
                            <tr>
                                <td data-ng-bind="item.year"></td>
                                <td data-ng-bind="item.month"></td>
                                <td>
                                    <a href="#editar" class="btn btn-info" data-ng-click="updateForm(item)">
                                        <input type="hidden" name="" value="" data-ng-bind="item.id">
                                        Edit
                                    </a>
                                    <a href="#remove" class="btn btn-danger" data-ng-click="removePointsheet(item)">
                                        <input type="hidden" name="" value="" data-ng-bind="item.id">
                                        Remove
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <em data-ng-if="data.pointsheets.length==0">Not exist any register of the pointsheet in the system</em>
                </article>
            </section>

            <!-- MODEL FORM -->
            <div id="modalFormPointsheet" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Pointsheet</h4>
                        </div>
                        <div class="modal-body">
                            <form class="form form-aligned" data-ng-submit="updatePointsheet()">
                                {% csrf_token %}
                                <input type="hidden" name="id" value="" data-nd-bind="data.id">
                                <div class="form-group">
                                    <label>Year:</label>
                                    <input type="number" id="id_year" name="year" value="" data-ng-model="data.year" class="form-control" placeholder="Year" title="Enter pointsheet year" required="required">
                                </div>
                                <div class="form-group">
                                    <label>Month:</label>
                                    <input type="number" id="id_month" name="month" value="" data-ng-model="data.month" class="form-control" placeholder="Month" title="Enter pointsheet month" required="required">
                                </div>
                                <div class="text-rigth">
                                    <input type="submit" value="Save" class="btn btn-primary">
                                </div>
                            </form>
                        </div>
                        <!--
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" title="Save changes">Save</button>
                        </div>-->
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div>
            <!-- /.modal -->
        </main>

        <!-- JAVASCRIPTs -->
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.13/angular.min.js" charset="utf-8"></script>

        <!-- BOOTSTRAP -->
        <script src="{% static 'js/bootstrap/js/bootstrap.min.js' %}"></script>

        <!-- ANGULAR -->
        <script src="{% static 'js/angular-csrf-cross-domain.js' %}"></script>
        <script src="{% static 'js/core.js' %}"></script>
    </body>
</html>