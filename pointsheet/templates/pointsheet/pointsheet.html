{% extends 'layout/base.html' %}

{% block content %}

<section data-ng-controller="pointsheetsCtrl">
    <header>
        <h2>Pointsheet</h2>
    </header>
    <section class="row">
        <button class="btn btn-primary" data-ng-click="showForm()">
            Insert
        </button>
        <button class="btn btn-default" title="Came back for last page.. defained so long">
            Came back
        </button>
    </section>
    <section class="row">
        <header class="alert alert-success" data-ng-show="data.success">
            <b>Success!</b>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </header>
        <article class="table-responsive">
            <table class="table table-striped table-bordered table-hover table-condensed" data-ng-if="data.pointsheets.length > 0">
                <thead>
                    <tr>
                        <th>Year</th>
                        <th>Month</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <td colspan="3">
                            <em>Rown <strong ng-bind="data.pointsheets.length"></strong></em>
                        </td>
                    </tr>
                </tfoot>
                <tbody data-ng-repeat="item in data.pointsheets">
                    <tr>
                        <td data-ng-bind="item.year"></td>
                        <td data-ng-bind="item.month"></td>
                        <td>
                            <a href="#editar" class="btn btn-info" data-ng-click="updateForm(item)">
                                <input type="hidden" name="" value="" data-ng-bind="item.id">
                                Edit
                            </a>
                            <a href="#remove" class="btn btn-danger" data-ng-click="removePointsheet(item)">
                                <input type="hidden" name="" value="" data-ng-bind="item.id">
                                Remove
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <em data-ng-if="data.pointsheets.length==0">Not exist any register of the pointsheet in the system</em>
        </article>
    </section>

    <!-- MODEL FORM -->
    <div id="modalFormPointsheet" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Pointsheet</h4>
                </div>
                <div class="modal-body">
                    <form class="form form-aligned" data-ng-submit="updatePointsheet()">
                        {% csrf_token %}
                        <input type="hidden" name="id" value="" data-nd-bind="data.id">
                        <div class="form-group">
                            <label>Year:</label>
                            <input type="number" id="id_year" name="year" value="" data-ng-model="data.year" class="form-control" placeholder="Year" title="Enter pointsheet year" required="required">
                        </div>
                        <div class="form-group">
                            <label>Month:</label>
                            <input type="number" id="id_month" name="month" value="" data-ng-model="data.month" class="form-control" placeholder="Month" title="Enter pointsheet month" required="required">
                        </div>
                        <div class="text-rigth">
                            <input type="submit" value="Save" class="btn btn-primary">
                        </div>
                    </form>
                </div>
                <!--
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" title="Save changes">Save</button>
                </div>-->
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</section>

{% endblock content %}